{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/谢红尘/AppData/Roaming/Microsoft/Windows/Printer Shortcuts/HBuilderProjects/uni-wechat-nodejs-shop/subpkg/settlement/settlement.vue?c21d","webpack:///C:/Users/谢红尘/AppData/Roaming/Microsoft/Windows/Printer Shortcuts/HBuilderProjects/uni-wechat-nodejs-shop/subpkg/settlement/settlement.vue?4b14","webpack:///C:/Users/谢红尘/AppData/Roaming/Microsoft/Windows/Printer Shortcuts/HBuilderProjects/uni-wechat-nodejs-shop/subpkg/settlement/settlement.vue?6f9c","uni-app:///subpkg/settlement/settlement.vue","webpack:///C:/Users/谢红尘/AppData/Roaming/Microsoft/Windows/Printer Shortcuts/HBuilderProjects/uni-wechat-nodejs-shop/subpkg/settlement/settlement.vue?5cd3","webpack:///C:/Users/谢红尘/AppData/Roaming/Microsoft/Windows/Printer Shortcuts/HBuilderProjects/uni-wechat-nodejs-shop/subpkg/settlement/settlement.vue?3dd3"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","isUseCoupon","showPay","coupon","payStatus","order_id","address","goodsList","isOrder","computed","goodsAndCoupon","price","onLoad","onShow","console","mounted","methods","numberChangeHandler","setCoupon","pay","submitOrder","goods_id","goods_count","couponid","lastPrice","uni","delta","setTimeout","url"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,mBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACc;;;AAGvE;AACiM;AACjM,gBAAgB,sLAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oMAEN;AACP,KAAK;AACL;AACA,aAAa,kOAEN;AACP,KAAK;AACL;AACA,aAAa,0SAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAA6vB,CAAgB,iqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACuDjxB;AAIA;AAGA;AAGA;AAAA;AAAA;AAAA,eACA;EACAC;IACA;MACA;MACAC;MACA;MACAC;MACA;MACAF;MACA;MACAG;MACA;MACAC;MACA;MACAC;MACA;MACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MAAA,CACA;MACA;MACAC;MACA;MACAC;IACA;EACA;EACAC,0CACA;IACAC;MACA;MACA;QACA;QACA;UACA;UACA;YACA;YACA;UACA;YACA;UACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACA;QACA;QACA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;EAAA,EACA;EACAC;IACA;IACA;IACA;IACA;MACA;MACA;MACA;MACA;IACA;;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACAC;IACAA;EACA;EACAC;IACA;IACA;EAAA,CACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACAC,uDACA,qDACA;IACA;IACAC;MACAH;MACAA;MACA;QACA;QACA;UACAA;UACA;UACA;UACAA;QACA;MACA;MACAA;IACA;IACAI;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACA;MACA;QACA;QACA;QACAN;QACA;UAAA,IACAO;YACAC;UAAA,OACA;YACAD;YACAC;UACA;QAAA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;UACAC;UACAC;QACA;QACAV;QACA;QACA;UACAA;UACA;UACAA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;EAAA,uEAEA;IAAA;IACA;IACA;MACAA;MACA;QACA;UACAA;UACA;UACA;QACA;QACA;QACAW;UACAC;QACA;MACA;IACA;EACA,sFAEA;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;cACAC;gBACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA,sFAEA;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACA;gBACA;gBACA;gBACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAEA,oFAEA;IACA;IACA;IACA;EACA,sFAEA;IACA;IACA;IACA;EACA,oFACA;IACAF;MACAG;IACA;EACA;AAEA;AAAA,2B;;;;;;;;;;;;;ACjSA;AAAA;AAAA;AAAA;AAAg6C,CAAgB,orCAAG,EAAC,C;;;;;;;;;;;ACAp7C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"subpkg/settlement/settlement.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subpkg/settlement/settlement.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./settlement.vue?vue&type=template&id=53970c1a&\"\nvar renderjs\nimport script from \"./settlement.vue?vue&type=script&lang=js&\"\nexport * from \"./settlement.vue?vue&type=script&lang=js&\"\nimport style0 from \"./settlement.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpkg/settlement/settlement.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./settlement.vue?vue&type=template&id=53970c1a&\"","var components\ntry {\n  components = {\n    myAddress: function () {\n      return import(\n        /* webpackChunkName: \"components/my-address/my-address\" */ \"@/components/my-address/my-address.vue\"\n      )\n    },\n    myGoodsSettle: function () {\n      return import(\n        /* webpackChunkName: \"components/my-goods-settle/my-goods-settle\" */ \"@/components/my-goods-settle/my-goods-settle.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons\" */ \"@dcloudio/uni-ui/lib/uni-icons/uni-icons.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-modal/u-modal\" */ \"@/uni_modules/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./settlement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./settlement.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<my-address :address=\"address\"></my-address>\r\n\t\t<view class=\"goods-box\" v-for=\"(item, index) in data\" :key=\"index\">\r\n\t\t\t<my-goods-settle :goods=\"item\" @num-change=\"numberChangeHandler\"></my-goods-settle>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"coupon-box\">\r\n\t\t\t<view class=\"coupon\" @click=\"useCoupon\">\r\n\t\t\t\t<text class=\"text\">\r\n\t\t\t\t\t优惠劵\r\n\t\t\t\t</text>\r\n\t\t\t\t<view v-if=\"!isUseCoupon\">\r\n\t\t\t\t\t<uni-icons type=\"forward\" size=\"16\"></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-else class=\"price-text\">\r\n\t\t\t\t\t-￥{{ price }}\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\r\n\t\t<view class=\"pay-box\">\r\n\t\t\t<radio-group @change=\"pay\">\r\n\t\t\t\t<view class=\"weixin\">\r\n\t\t\t\t\t<u-icon name=\"weixin-circle-fill\" size=\"30px\" color=\"#33ec4e\"></u-icon>\r\n\t\t\t\t\t<text class=\"weixin-text\">微信支付</text>\r\n\t\t\t\t\t<radio checked value=\"微信支付\" color=\"#f6a93c\"></radio>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"zhifubao\">\r\n\t\t\t\t\t<u-icon name=\"zhifubao-circle-fill\" size=\"30px\" color=\"#3394ec\"></u-icon>\r\n\t\t\t\t\t<text class=\"zhifubao-text\">支付宝</text>\r\n\t\t\t\t\t<radio value=\"支付宝\" color=\"#f6a93c\"></radio>\r\n\t\t\t\t</view>\r\n\t\t\t</radio-group>\r\n\t\t</view>\r\n\r\n\t\t<!-- 底部提交订单 -->\r\n\t\t<view class=\"my-settle-container\">\r\n\t\t\t<view class=\"amount-box\">\r\n\t\t\t\t<text class=\"text\">共{{ checkedCount }}件</text>\r\n\t\t\t\t合计:<text class=\"amount\">￥{{ goodsAndCoupon }}</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 结算按钮 -->\r\n\t\t\t<view class=\"btn-settle\" @click=\"submitOrder\">提交订单</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 付款信息 -->\r\n\t\t<u-modal :confirm-color=\"lightColor\" :show=\"showPay\" :show-cancel-button=\"true\" :content=\"'是否确认付款?'\"\r\n\t\t\t@confirm=\"confirmPay\" @cancel=\"cancelPay\"></u-modal>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n\tmapMutations,\r\n\tmapGetters\r\n} from 'vuex'\r\nimport {\r\n\tgetDefaultAddress\r\n} from '../../api/address.js'\r\nimport {\r\n\tcreateOrder,\r\n\tpayCart\r\n} from '../../api/order.js'\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// 是否能够使用优惠劵\r\n\t\t\tisUseCoupon: false,\r\n\t\t\t// 付款信息\r\n\t\t\tshowPay: false,\r\n\t\t\t// 商品信息\r\n\t\t\tdata: [],\r\n\t\t\t// 优惠券\r\n\t\t\tcoupon: [],\r\n\t\t\t// 支付状态\r\n\t\t\tpayStatus: '',\r\n\t\t\t// 订单id\r\n\t\t\torder_id: '',\r\n\t\t\t// 地址\r\n\t\t\taddress: {\r\n\t\t\t\t// id: 1,\r\n\t\t\t\t// name: '张三',\r\n\t\t\t\t// tel: 15863008280,\r\n\t\t\t\t// province: '山东省',\r\n\t\t\t\t// city: '青岛市',\r\n\t\t\t\t// county: '李沧区',\r\n\t\t\t\t// street: '重庆中路873号',\r\n\t\t\t\t// isDefault: 1\r\n\t\t\t},\r\n\t\t\t// 商品列表，传给后台的数据\r\n\t\t\tgoodsList: [],\r\n\t\t\t// 支付来源\r\n\t\t\tisOrder: false,\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters('cart', ['checkedCount', 'checkedGoodsAmount']),\r\n\t\tgoodsAndCoupon() {\r\n\t\t\t// 判断是否使用优惠劵\r\n\t\t\tif (this.coupon.couponId) {\r\n\t\t\t\t// 判断是否满足使用条件\r\n\t\t\t\tif (this.checkedGoodsAmount > this.coupon.consumeThreshold) {\r\n\t\t\t\t\t// 折扣价格\r\n\t\t\t\t\tif (this.coupon.couponType == 'DISCOUNT') {\r\n\t\t\t\t\t\tlet num = this.coupon.discount / 10\r\n\t\t\t\t\t\treturn (this.checkedGoodsAmount * num).toFixed(2)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn this.checkedGoodsAmount - this.coupon.price;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn this.checkedGoodsAmount\r\n\t\t\t}\r\n\t\t},\r\n\t\tprice() {\r\n\t\t\tif (this.checkedGoodsAmount > this.coupon.consumeThreshold) {\r\n\t\t\t\t// 满足使用条件\r\n\t\t\t\tthis.isUseCoupon = true\r\n\t\t\t\tif (this.coupon.couponType == 'DISCOUNT') {\r\n\t\t\t\t\tlet num = 1 - this.coupon.discount / 10\r\n\t\t\t\t\treturn (this.checkedGoodsAmount * num).toFixed(2)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.coupon.price;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonLoad(options) {\r\n\t\t// console.log(\"onLoad-----------\");\r\n\t\t// 获取商品 Id\r\n\t\t// console.log(options);\r\n\t\tif (options.isOrder) {\r\n\t\t\tthis.isOrder = options.isOrder;\r\n\t\t\tthis.order_id = options.order_id;\r\n\t\t\t// console.log(this.isOrder);\r\n\t\t\t// console.log(this.order_id);\r\n\t\t}\r\n\t\tthis.data = JSON.parse(options.goods);\r\n\t\tthis.setAddress();\r\n\t\t// this.address = JSON.parse(uni.getStorageSync('address'));\r\n\t\t// this.data = JSON.parse(uni.getStorageSync('cart'))\r\n\t\t// 调用请求商品详情数据的方法\r\n\t\t// console.log(\"商品信息\");\r\n\t\t// console.log(this.data);\r\n\t},\r\n\tonShow() {\r\n\t\t// console.log(this.checkedGoodsAmount);\r\n\t\tthis.getAddress();\r\n\t\t// this.address = JSON.parse(uni.getStorageSync('address'));\r\n\t\t// console.log(\"onShow---------\");\r\n\t\t// console.log(this.address);\r\n\t\t// this.coupon = JSON.parse(currPage.options);\r\n\t\tconsole.log(\"优惠券信息\");\r\n\t\tconsole.log(this.coupon)\r\n\t},\r\n\tmounted() {\r\n\t\t// console.log(\"mouted---------\");\r\n\t\t// console.log(this.address);\r\n\t},\r\n\t// onBackPress: function() {\r\n\t// \t// 监听返回事件，在返回时获取传递的地址数据\r\n\t// \tuni.$on('addressData', function(item) {\r\n\t// \t\t// 在这里处理传递的地址数据\r\n\t// \t\tconsole.log(\"返回数据---------\");\r\n\t// \t\tconsole.log(item);\r\n\t// \t});\r\n\t// },\r\n\tmethods: {\r\n\t\t...mapMutations('user', ['updateAddress']),\r\n\t\t...mapMutations('cart', ['removeGoodsById']),\r\n\t\t// 商品的数量发生了变化\r\n\t\tnumberChangeHandler(e) {\r\n\t\t\tconsole.log(\"数量发生变化\")\r\n\t\t\tconsole.log(e);\r\n\t\t\tfor (let i = 0; i < this.data.length; i++) {\r\n\t\t\t\t// console.log(this.data);\r\n\t\t\t\tif (this.data[i].goods_id == e.goods_id) {\r\n\t\t\t\t\tconsole.log(\"数量发生变化\" + e.goods_id);\r\n\t\t\t\t\t// console.log(this.data);\r\n\t\t\t\t\tthis.data[i].goods_count = e.goods_count;\r\n\t\t\t\t\tconsole.log(this.data[i].goods_count);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconsole.log(this.data);\r\n\t\t},\r\n\t\tsetCoupon(newVal) {\r\n\t\t\tthis.coupon = newVal;\r\n\t\t},\r\n\t\t// 选择支付方式\r\n\t\tpay(event) {\r\n\t\t\t// console.log(event);\r\n\t\t\tthis.payType = event.detail.value;\r\n\t\t},\r\n\t\t// 开始支付\r\n\t\tsubmitOrder() {\r\n\t\t\t// 如果来自订单页面，直接支付\r\n\t\t\tif (this.isOrder) {\r\n\t\t\t\tthis.showPay = true;\r\n\t\t\t} else {\r\n\t\t\t\tlet addressId = this.address.id;\r\n\t\t\t\tlet payment = this.checkedGoodsAmount;\r\n\t\t\t\tconsole.log(this.data);\r\n\t\t\t\tthis.goodsList = this.data.map(({\r\n\t\t\t\t\tgoods_id,\r\n\t\t\t\t\tgoods_count\r\n\t\t\t\t}) => ({\r\n\t\t\t\t\tgoods_id,\r\n\t\t\t\t\tgoods_count\r\n\t\t\t\t}));\r\n\r\n\t\t\t\t// console.log(\"开始结算-------------\");\r\n\t\t\t\t// console.log(addressId);\r\n\t\t\t\t// console.log(payment);\r\n\t\t\t\t// console.log(goodsList);\r\n\t\t\t\tlet couponid;\r\n\t\t\t\tlet lastPrice;\r\n\t\t\t\tif (this.coupon) {\r\n\t\t\t\t\tcouponid = this.coupon.id || null;\r\n\t\t\t\t\tlastPrice = this.goodsAndCoupon;\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(couponid,lastPrice);\r\n\t\t\t\t// 生成订单\r\n\t\t\t\tcreateOrder(addressId, payment, this.goodsList,couponid,lastPrice).then((res) => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tthis.order_id = res.data.order_id;\r\n\t\t\t\t\tconsole.log(this.order_id);\r\n\t\t\t\t\tif (res.status == 200) {\r\n\t\t\t\t\t\t// 付款成功(后续支付结果需要调用支付接口，支付成功就返回BUYER_PAYMENT_SUCCESS，否则返回BUYER_PAYMENT_FAILED)\r\n\t\t\t\t\t\tthis.showPay = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 支付\r\n\t\tpay() {\r\n\t\t\t// 调用支付接口\r\n\t\t\tpayCart(this.order_id, this.payStatus).then((res) => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tif (res.status == 200) {\r\n\t\t\t\t\tfor (let i = 0; i < this.goodsList.length; i++) {\r\n\t\t\t\t\t\tconsole.log(this.goodsList[i].goods_id);\r\n\t\t\t\t\t\t// 从购物车中删除已经下单的商品\r\n\t\t\t\t\t\tthis.removeGoodsById(this.goodsList[i].goods_id)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 返回上一页（后续添加支付成功页面，直接跳转）\r\n\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\tdelta: 1\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 从本地数据获取地址\r\n\t\tasync getAddress() {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t// 获取数据\r\n\t\t\t\tthis.address = JSON.parse(uni.getStorageSync('address'));\r\n\t\t\t}, 100);\r\n\t\t},\r\n\t\t// 从数据库获取默认地址\r\n\t\tasync setAddress() {\r\n\t\t\tawait getDefaultAddress().then((res) => {\r\n\t\t\t\t// console.log(res);\r\n\t\t\t\tthis.address = res.data[0];\r\n\t\t\t\t// console.log(this.address);\r\n\t\t\t\tthis.updateAddress(this.address)\r\n\t\t\t})\r\n\t\t\t// console.log(this.address);\r\n\t\t},\r\n\t\t// 取消付款\r\n\t\tcancelPay() {\r\n\t\t\tthis.showPay = false;\r\n\t\t\tthis.payStatus = 'BUYER_PAYMENT_FAILED';\r\n\t\t\tthis.pay();\r\n\t\t},\r\n\t\t// 确认付款\r\n\t\tconfirmPay() {\r\n\t\t\tthis.showPay = false;\r\n\t\t\tthis.payStatus = 'BUYER_PAYMENT_SUCCESS';\r\n\t\t\tthis.pay();\r\n\t\t},\r\n\t\tuseCoupon() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/subpkg/coupon-user/coupon-user'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.coupon-box {\r\n\tbackground-color: #fff;\r\n\tborder-radius: 10px;\r\n\tmargin: 10px 2px;\r\n\tpadding: 15px 10px;\r\n\r\n\t.coupon {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\r\n\t\t.price-text {\r\n\t\t\tfont-size: 20px;\r\n\t\t\tcolor: #ff0000;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.pay-box {\r\n\tbackground-color: #fff;\r\n\tborder-radius: 10px;\r\n\tmargin: 10px 2px;\r\n\tpadding: 15px 10px;\r\n\r\n\t.zhifubao {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 5px 0px;\r\n\r\n\t\t.zhifubao-text {\r\n\t\t\twidth: 100%;\r\n\t\t\tmargin-left: 20px;\r\n\t\t\tline-height: 30px;\r\n\t\t}\r\n\t}\r\n\r\n\t.weixin {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 5px 0px;\r\n\r\n\t\t.weixin-text {\r\n\t\t\twidth: 100%;\r\n\t\t\tmargin-left: 20px;\r\n\t\t\tline-height: 30px;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.my-settle-container {\r\n\tposition: fixed;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 50px;\r\n\tbackground-color: #fff;\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding-left: 5px;\r\n\tfont-size: 18px;\r\n\r\n\t.amount-box {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\r\n\t\t.text {\r\n\t\t\tfont-size: 13px;\r\n\t\t\tcolor: #888586;\r\n\t\t\tmargin-right: 20px;\r\n\t\t\tmargin-left: 5px;\r\n\t\t}\r\n\r\n\t\t.amount {\r\n\t\t\tcolor: #f63c4c;\r\n\t\t}\r\n\t}\r\n\r\n\t.btn-settle {\r\n\t\theight: 40px;\r\n\t\tmin-width: 100px;\r\n\t\tbackground-color: #f6a93c;\r\n\t\tcolor: white;\r\n\t\tborder-radius: 30px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tpadding: 0 10px;\r\n\t\tmargin-right: 10px;\r\n\t}\r\n}\r\n</style>","import mod from \"-!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./settlement.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./settlement.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1681979341080\n      var cssReload = require(\"C:/software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}